(this["webpackJsonpshrine-web"]=this["webpackJsonpshrine-web"]||[]).push([[0],{212:function(e,t,n){},229:function(e,t){},231:function(e,t){},242:function(e,t){},244:function(e,t){},271:function(e,t){},273:function(e,t){},274:function(e,t){},279:function(e,t){},281:function(e,t){},287:function(e,t){},289:function(e,t){},308:function(e,t){},320:function(e,t){},323:function(e,t){},327:function(e,t,n){"use strict";n.r(t);var a=n(10),s=n(11),c=n(16),r=n(15),o=n(1),i=n(37),l=n(9),d=n(28),u=n.n(d),b=(n(168),n(189),n(62)),j=n(4),h=n.n(j),p=n(6),x=n(7),m=n(156),O=n.n(m);n(208).config();var f=O.a.create({baseURL:"https://shrine.hyplaze.com/api"}),v=n(13),g=n.p+"static/media/logo.fbd08a8c.png",y=(n(212),n(0)),w=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).render=function(){var e="HomePage"===s.state.page?"nav-link active":"nav-link",t="GeneratorPage"===s.state.page?"nav-link active":"nav-link",n="CheckerPage"===s.state.page?"nav-link active":"nav-link";return Object(y.jsx)("nav",{class:"navbar navbar-expand-lg navbar-light bg-light",children:Object(y.jsxs)("div",{class:"container-fluid",children:[Object(y.jsxs)("div",{class:"navbar-brand",children:[Object(y.jsx)("img",{src:g,alt:"",width:"30",height:"24",class:"d-inline-block align-text-top"}),"  Shrine"]}),Object(y.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(y.jsx)("span",{class:"navbar-toggler-icon"})}),Object(y.jsx)("div",{class:"collapse navbar-collapse",id:"navbarNav",children:Object(y.jsxs)("ul",{class:"navbar-nav",children:[Object(y.jsx)("li",{class:"nav-item",children:Object(y.jsx)("a",{class:e,"aria-current":"page",href:"/home",children:"Home"})}),Object(y.jsx)("li",{class:"nav-item",children:Object(y.jsx)("a",{class:t,href:"/generator",children:"Generator"})}),Object(y.jsx)("li",{class:"nav-item",children:Object(y.jsx)("a",{class:n,href:"/checker",children:"Password-Pwned?"})}),Object(y.jsxs)("li",{class:"nav-item dropdown",children:[Object(y.jsx)("a",{class:"nav-link dropdown-toggle",href:"/#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Account"}),Object(y.jsxs)("ul",{class:"dropdown-menu",children:[Object(y.jsx)("li",{children:Object(y.jsx)("p",{class:"dropdown-item",children:null===localStorage.getItem("email")?"":localStorage.getItem("email").split("@")[0]})}),Object(y.jsx)("li",{children:Object(y.jsx)("hr",{class:"dropdown-divider"})}),Object(y.jsx)("li",{children:Object(y.jsx)("button",{class:"dropdown-item",onClick:function(){s.logoutHandler()},children:"Log out"})})]})]})]})})]})})},s.state={page:e.page,logoutHandler:e.logoutHandler},s.logoutHandler=s.logoutHandler.bind(Object(v.a)(s)),s}return Object(s.a)(n,[{key:"logoutHandler",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({method:"post",url:"/logout",data:{cookie:localStorage.getItem("cookie")}});case 2:!0===e.sent.data.Status&&(localStorage.clear(),this.props.history.push("/"),this.props.history.go());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({method:"post",url:"/validcookie",data:{cookie:localStorage.getItem("cookie"),email:localStorage.getItem("email")}});case 2:t=e.sent,localStorage.getItem("cookie")&&localStorage.getItem("stretchedMasterKey")&&!0===t.data.Status||(localStorage.clear(),this.props.history.replace("/login"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(o.Component),k=Object(l.g)(w),C=n(2),I=n(333),S=n(335),M=n(334),A=n(53),E=n(29),P=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,s,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(E.a)(btoa(unescape(encodeURIComponent(t)))),e.next=3,window.crypto.subtle.importKey("raw",Object(E.a)(n),{name:"AES-GCM"},!1,["encrypt"]);case 3:return a=e.sent,s=crypto.getRandomValues(new Uint8Array(12)),e.next=7,window.crypto.subtle.encrypt({name:"AES-GCM",iv:s,tagLength:128},a,t);case 7:return c=e.sent,r=new Uint8Array(c),o=new Uint8Array([].concat(Object(A.a)(s),Object(A.a)(r))),e.abrupt("return",Object(E.b)(o));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,s,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.importKey("raw",Object(E.a)(n),{name:"AES-GCM"},!1,["decrypt"]);case 2:return a=e.sent,s=new Uint8Array(Object(E.a)(t)),c=s.slice(0,12),r=s.slice(12),e.next=8,window.crypto.subtle.decrypt({name:"AES-GCM",iv:c,tagLength:128},a,r);case 8:return o=e.sent,e.abrupt("return",decodeURIComponent(escape(atob(Object(E.b)(o)))));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=n(159),K=n.n(D),H=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,s,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.toUpperCase().replace(/\s/g,""),a=/^[A-Z2-7]*$/,0!==t.length&&a.exec(t)){e.next=4;break}return e.abrupt("return","NaN");case 4:return s=function(e){for(var t=("0".repeat(64)+e.toString(2)).slice(-64),n=[],a=0;a<8;a++)n[a]=parseInt(t.slice(8*a,8*a+8),2);return Uint8Array.from(n).buffer},c=function(e){var t=15&e[e.length-1];return(127&e[t])<<24|(255&e[t+1])<<16|(255&e[t+2])<<8|255&e[t+3]},e.next=8,crypto.subtle.importKey("raw",K()(t,"RFC4648"),{name:"HMAC",hash:{name:"SHA-1"}},!1,["sign"]);case 8:return r=e.sent,e.next=11,crypto.subtle.sign("HMAC",r,s(n));case 11:return o=e.sent,e.abrupt("return",("000000"+c(new Uint8Array(o))%Math.pow(10,6)).slice(-6));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(e){var t=Math.floor(Date.now()/3e4);return H(e,t)},T=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).handleOpenInspectModal=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.timer=setInterval((function(){s.countDown()}),1e3),e.t0=s,e.t1=C.a,e.t2=Object(C.a)({},t),e.t3={},e.next=7,F(t.password,localStorage.getItem("stretchedMasterKey"));case 7:return e.t4=e.sent,e.t5=U,e.next=11,F(t.twoFA,localStorage.getItem("stretchedMasterKey"));case 11:return e.t6=e.sent,e.next=14,(0,e.t5)(e.t6);case 14:return e.t7=e.sent,e.t8={password:e.t4,twoFA:e.t7},e.t9=(0,e.t1)(e.t2,e.t3,e.t8),e.t10=C.a,e.t11=Object(C.a)({},t),e.t12={},e.next=22,F(t.password,localStorage.getItem("stretchedMasterKey"));case 22:return e.t13=e.sent,e.next=25,F(t.twoFA,localStorage.getItem("stretchedMasterKey"));case 25:e.t14=e.sent,e.t15={password:e.t13,twoFA:e.t14},e.t16=(0,e.t10)(e.t11,e.t12,e.t15),e.t17=Math.floor((Date.now()-3e4*Math.floor(Date.now()/3e4))/1e3),e.t18={showInspectModal:!0,entryInModal:e.t9,decryptedEntry:e.t16,remainingSeconds:e.t17},e.t0.setState.call(e.t0,e.t18);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleCloseInspectModal=function(){s.setState({entryInModal:{}}),s.setState({showInspectModal:!1}),s.setState({showPassword:!1}),s.setState({decryptedEntry:{}}),s.setState({remainingSeconds:0}),clearInterval(s.timer)},s.handleShowPassword=function(e){s.setState({showPassword:!s.state.showPassword})},s.handleUpdate2FA=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.t1=C.a,e.t2=Object(C.a)({},s.state.entryInModal),e.t3={},e.next=6,U(s.state.decryptedEntry.twoFA);case 6:e.t4=e.sent,e.t5={twoFA:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t7={entryInModal:e.t6},e.t0.setState.call(e.t0,e.t7);case 11:case"end":return e.stop()}}),e)}))),s.handleOpenEditModal=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s,e.t1=C.a,e.t2=Object(C.a)({},t),e.t3={},!("password"in t)){e.next=10;break}return e.next=7,F(t.password,localStorage.getItem("stretchedMasterKey"));case 7:e.t4=e.sent,e.next=11;break;case 10:e.t4="";case 11:if(e.t5=e.t4,!("twoFA"in t)){e.next=18;break}return e.next=15,F(t.twoFA,localStorage.getItem("stretchedMasterKey"));case 15:e.t6=e.sent,e.next=19;break;case 18:e.t6="";case 19:e.t7=e.t6,e.t8={password:e.t5,twoFA:e.t7},e.t9=(0,e.t1)(e.t2,e.t3,e.t8),e.t10={showEditModal:!0,entryInModal:e.t9},e.t0.setState.call(e.t0,e.t10);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.handleSaveAndCloseEditModal=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.t0=localStorage.getItem("cookie"),e.t1=s.state.entryInModal.boxid,e.t2=s.state.entryInModal.boxname,e.next=6,P(s.state.entryInModal.twoFA,localStorage.getItem("stretchedMasterKey"));case 6:return e.t3=e.sent,e.t4=s.state.entryInModal.username,e.t5=s.state.entryInModal.url,e.next=11,P(s.state.entryInModal.password,localStorage.getItem("stretchedMasterKey"));case 11:if(e.t6=e.sent,n={cookie:e.t0,boxid:e.t1,boxname:e.t2,twoFA:e.t3,username:e.t4,url:e.t5,password:e.t6},!s.props.entries.map((function(e){return e.boxid})).includes(s.state.entryInModal.boxid)){e.next=19;break}return e.next=16,f({method:"post",url:"/changebox",data:n});case 16:t=e.sent,e.next=22;break;case 19:return e.next=21,f({method:"post",url:"/addbox",data:n});case 21:t=e.sent;case 22:!0===t.data.Status&&s.state.refresh(),s.setState({entryInModal:{}}),s.setState({showEditModal:!1}),s.setState({showPassword:!1});case 26:case"end":return e.stop()}}),e)}))),s.handleCloseEditModal=function(){s.setState({entryInModal:{}}),s.setState({showEditModal:!1}),s.setState({showPassword:!1})},s.handleDelete=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({method:"post",url:"/deletebox",data:{cookie:localStorage.getItem("cookie"),boxid:t}});case 2:!0===e.sent.data.Status&&s.state.refresh();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.render=function(){return Object(y.jsxs)("div",{class:"container-fluid",children:[Object(y.jsx)("div",{class:"d-grid",children:Object(y.jsx)("button",{class:"btn btn-primary mt-1",onClick:Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={}).boxid=Object(M.a)(),e.next=4,s.handleOpenEditModal(t);case 4:case"end":return e.stop()}}),e)}))),children:"Add a new Password"})}),Object(y.jsx)("ol",{class:"list-group list-group-numbered mt-3",children:s.state.entries.map((function(e){return Object(y.jsx)("div",{class:"card border-grey mb-2",children:Object(y.jsxs)("div",{class:"row d-flex align-items-center",children:[Object(y.jsx)("div",{class:"col-xxl-2 col-xl-3 col-lg-4",children:Object(y.jsxs)("div",{class:"btn-group",role:"group",children:[Object(y.jsx)("button",{class:"btn btn-secondary",onClick:Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.handleOpenInspectModal(e);case 2:case"end":return t.stop()}}),t)}))),children:"Inspect"}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){s.handleOpenEditModal(e)},children:"Change"})]})}),Object(y.jsx)("div",{class:"col-xxl-10 col-xl-9 col-lg-8",children:Object(y.jsxs)("div",{class:"row",children:[Object(y.jsx)("div",{class:"col-10",children:Object(y.jsxs)("div",{class:"row",children:[Object(y.jsx)("div",{class:"col-5",children:Object(y.jsx)("div",{class:"fw-bold",children:e.boxname})}),Object(y.jsx)("div",{class:"col-5",children:e.url})]})}),Object(y.jsx)("div",{class:"col-2",children:Object(y.jsx)("button",{type:"button",class:"btn btn-outline-danger",onClick:function(){s.handleDelete(e.boxid)},children:"Delete"})})]})})]})})}))}),Object(y.jsxs)(I.a,{show:s.state.showEditModal,onHide:s.handleCloseEditModal,children:[Object(y.jsx)(I.a.Header,{children:Object(y.jsx)(I.a.Title,{children:"Edit a box"})}),Object(y.jsx)(I.a.Body,{children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"Website Name"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{type:"text",class:"form-control",id:"recipient-name",onChange:function(e){s.setState({entryInModal:Object(C.a)(Object(C.a)({},s.state.entryInModal),{},{boxname:e.target.value})})},value:s.state.entryInModal.boxname}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.boxname)},children:"Copy"})]})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"URL"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{type:"text",class:"form-control",id:"recipient-name",onChange:function(e){s.setState({entryInModal:Object(C.a)(Object(C.a)({},s.state.entryInModal),{},{url:e.target.value})})},value:s.state.entryInModal.url}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.url)},children:"Copy"})]})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"Username"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{type:"text",class:"form-control",id:"recipient-name",onChange:function(e){s.setState({entryInModal:Object(C.a)(Object(C.a)({},s.state.entryInModal),{},{username:e.target.value})})},value:s.state.entryInModal.username}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.username)},children:"Copy"})]})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"Password"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{type:s.state.showPassword?"text":"password",class:"form-control",id:"recipient-name",onChange:function(e){s.setState({entryInModal:Object(C.a)(Object(C.a)({},s.state.entryInModal),{},{password:e.target.value})})},value:s.state.entryInModal.password,onClick:s.handleShowPassword}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.password)},children:"Copy"})]}),Object(y.jsx)("div",{class:"form-text",children:"Click on password to "+(s.state.showPassword?"hide":"show")+" password"})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"Two-Factor Authorization Code"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{type:"text",class:"form-control",id:"recipient-name",onChange:function(e){s.setState({entryInModal:Object(C.a)(Object(C.a)({},s.state.entryInModal),{},{twoFA:e.target.value})})},value:s.state.entryInModal.twoFA}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.twoFA)},children:"Copy"})]})]})]})}),Object(y.jsxs)(I.a.Footer,{children:[Object(y.jsx)(S.a,{variant:"secondary",onClick:s.handleCloseEditModal,children:"Close"}),Object(y.jsx)(S.a,{variant:"primary",onClick:s.handleSaveAndCloseEditModal,children:"Save Changes"})]})]}),Object(y.jsxs)(I.a,{show:s.state.showInspectModal,onHide:s.handleCloseInspectModal,children:[Object(y.jsx)(I.a.Header,{children:Object(y.jsx)(I.a.Title,{children:"Inspect a box"})}),Object(y.jsx)(I.a.Body,{children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"Name"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{readOnly:!0,type:"text",class:"form-control",id:"recipient-name",value:s.state.entryInModal.boxname}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.boxname)},children:"Copy"})]})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"URL"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{readOnly:!0,type:"text",class:"form-control",id:"recipient-name",value:s.state.entryInModal.url}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.url)},children:"Copy"})]})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"Username"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{readOnly:!0,type:"text",class:"form-control",id:"recipient-name",value:s.state.entryInModal.username}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.username)},children:"Copy"})]})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"Password"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{readOnly:!0,type:s.state.showPassword?"text":"password",class:"form-control",id:"recipient-name",value:s.state.entryInModal.password,onClick:s.handleShowPassword}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.password)},children:"Copy"})]}),Object(y.jsx)("div",{class:"form-text",children:"Click on password to "+(s.state.showPassword?"hide":"show")+" password"})]}),Object(y.jsxs)("div",{class:"form-group",children:[Object(y.jsx)("label",{for:"recipient-name",class:"col-form-label",children:"2FA"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{readOnly:!0,type:"text",class:"form-control",id:"recipient-name",value:s.state.entryInModal.twoFA+" (refresh in "+(30-Math.floor((Date.now()-3e4*Math.floor(Date.now()/3e4))/1e3))+" seconds)",onClick:s.handleUpdate2FA}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(){navigator.clipboard.writeText(s.state.entryInModal.twoFA)},children:"Copy"})]})]})]})}),Object(y.jsx)(I.a.Footer,{children:Object(y.jsx)(S.a,{variant:"secondary",onClick:s.handleCloseInspectModal,children:"Close"})})]})]})},s.state={entries:s.props.entries,showInspectModal:!1,showEditModal:!1,entryInModal:{},decryptedEntry:{},remainingSeconds:0,refresh:s.props.refresh,showPassword:!1},s.handleOpenInspectModal=s.handleOpenInspectModal.bind(Object(v.a)(s)),s.handleCloseInspectModal=s.handleCloseInspectModal.bind(Object(v.a)(s)),s.handleOpenEditModal=s.handleOpenEditModal.bind(Object(v.a)(s)),s.handleSaveAndCloseEditModal=s.handleSaveAndCloseEditModal.bind(Object(v.a)(s)),s.handleCloseEditModal=s.handleCloseEditModal.bind(Object(v.a)(s)),s.handleShowPassword=s.handleShowPassword.bind(Object(v.a)(s)),s.countDown=s.countDown.bind(Object(v.a)(s)),s.timer=0,s}return Object(s.a)(n,[{key:"countDown",value:function(){var e=this.state.remainingSeconds;e=Math.floor((Date.now()-3e4*Math.floor(Date.now()/3e4))/1e3),this.setState({remainingSeconds:e}),0===e&&(this.handleUpdate2FA(),this.setState({remainingSeconds:30}))}}]),n}(o.Component),_=n(221),G={};function B(){return B=Object(p.a)(h.a.mark((function e(){var t,n,a,s,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return r=Object(p.a)(h.a.mark((function e(t){var n,a,s,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("password"in t)){e.next=13;break}return o=function(e){var n=e.split(":");n[0]===c&&(G[t.boxname]=n[1])},e.next=4,F(t.password,localStorage.getItem("stretchedMasterKey"));case 4:return n=e.sent,a=_(n).toUpperCase(),s=a.slice(0,5),c=a.slice(-35),e.next=10,f.get("https://api.pwnedpasswords.com/range/"+s);case 10:r=e.sent,r.data.split("\r\n").forEach(o);case 13:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)},c=function(e){return r.apply(this,arguments)},e.next=4,f({method:"post",url:"/basicrequest",data:{cookie:localStorage.getItem("cookie")}});case 4:t=e.sent,n=Object(b.a)(t.data),e.prev=6,n.s();case 8:if((a=n.n()).done){e.next=14;break}return s=a.value,e.next=12,c(s);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:Object.keys(G).length;case 23:case"end":return e.stop()}}),e,null,[[6,16,19,22]])}))),B.apply(this,arguments)}var N=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={value:0,pressed:!1,breached:G},s.Change=s.Change.bind(Object(v.a)(s)),s}return Object(s.a)(n,[{key:"Change",value:function(e){var t=this;(function(){return B.apply(this,arguments)})().then((function(){t.setState({value:Object.keys(G).length,pressed:!0,breached:G})}))}},{key:"render",value:function(){var e,t=[];if(this.state.pressed)if(0!==this.state.value){e=Object(y.jsx)("h6",{class:"text-danger",children:"WARNING: Total "+this.state.value+" breaches"});for(var n=0;n<this.state.value;n++)t.push(Object(y.jsx)("span",{class:"list-group-item",children:'In the box "'+Object.keys(this.state.breached)[n]+'": password has been seen '+Object.values(this.state.breached)[n]+" times before."},"b"+n))}else e=Object(y.jsx)("h6",{class:"text-success",children:"There are no password breaches. You are good to go."});return Object(y.jsxs)("div",{class:"container-fluid",children:[Object(y.jsx)("div",{class:"row",children:Object(y.jsx)(k,{page:"CheckerPage"})}),Object(y.jsxs)("div",{class:"row mt-3",children:[Object(y.jsx)("div",{class:"col-3",children:Object(y.jsxs)("div",{class:"list-group",children:[Object(y.jsx)("button",{type:"button",class:"list-group-item list-group-item-action",onClick:this.Change,children:"Check vulnerabilities"}),Object(y.jsx)("p",{class:"m-2",children:Object(y.jsxs)("em",{children:["A vulnerability indicates that a password has previously appeared in a data breach and should never be used. If a vulnerability happens, please change password"," ",Object(y.jsx)("strong",{children:" immediately"}),"."]})})]})}),Object(y.jsx)("div",{class:"col-9",children:Object(y.jsxs)("div",{class:"card",children:[Object(y.jsx)("div",{class:"card-header fw-bold",children:e}),t]})})]})]})}}]),n}(o.Component),R=function(){var e=Object(l.f)(),t=Object(o.useState)([]),n=Object(x.a)(t,2),a=n[0],s=n[1],c=Object(o.useState)([]),r=Object(x.a)(c,2),i=r[0],d=r[1],u=Object(o.useState)(""),j=Object(x.a)(u,2),m=j[0],O=j[1],v=Object(o.useState)(0),g=Object(x.a)(v,2),w=g[0],C=g[1],I=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({method:"post",url:"/basicrequest",data:{cookie:localStorage.getItem("cookie")}});case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],0===m.length)d(t);else{a=Object(b.a)(t);try{for(a.s();!(s=a.n()).done;)("boxname"in(c=s.value)&&c.boxname.includes(m)||"username"in c&&c.username.includes(m)||"url"in c&&c.url.includes(m))&&n.push(c)}catch(r){a.e(r)}finally{a.f()}d(n)}C(w+1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){S(a)}),[a]),Object(o.useEffect)((function(){I()}),[m]),Object(o.useEffect)((function(){I()}),[e]),Object(y.jsxs)("div",{class:"container-fluid",children:[Object(y.jsx)("div",{class:"row",children:Object(y.jsx)(k,{page:"HomePage"})}),Object(y.jsxs)("div",{class:"row mt-3",children:[Object(y.jsxs)("div",{class:"col-3",children:[Object(y.jsx)("div",{class:"card border-grey",children:Object(y.jsx)("h3",{class:"m-2 p-1",children:"Welcome to Shrine!"})}),Object(y.jsx)("div",{class:"list-group m-1",children:Object(y.jsxs)("form",{class:"d-flex mt-2",children:[Object(y.jsx)("input",{class:"form-control me-2",type:"search",placeholder:"Search",value:m,onChange:function(e){O(e.target.value)}}),Object(y.jsx)("button",{class:"btn btn-outline-success",type:"submit",children:"Search"})]})}),Object(y.jsx)("p",{class:"m-2",children:Object(y.jsx)("em",{children:Object(y.jsxs)("small",{children:["Search your shrine with ",Object(y.jsx)("strong",{children:"website name"}),". The result will be shown in real time. You can",Object(y.jsx)("strong",{children:" copy"})," an entry inside inspection window."," "]})})})]}),Object(y.jsx)("div",{class:"col-9",children:Object(y.jsx)(T,{entries:i,refresh:I},w)})]})]})};var L=function(){var e=Object(l.f)();return Object(y.jsx)("div",{class:"container-fluid vh-100",children:Object(y.jsxs)("div",{class:"row justify-content-center h-100 align-items-center",children:[Object(y.jsx)("div",{class:"col-3",children:Object(y.jsx)("img",{src:g,class:"img-fluid d-flex",alt:"Responsive"})}),Object(y.jsxs)("div",{class:"col-3 text-center",children:[Object(y.jsx)("h1",{class:"display-1",children:"Shrine"}),Object(y.jsx)("p",{class:"h6",children:"Password Manager"}),Object(y.jsxs)("figure",{class:"text-center",children:[Object(y.jsx)("blockquote",{class:"blockquote",children:Object(y.jsx)("p",{children:'"Use at your own risk."'})}),Object(y.jsx)("figcaption",{class:"blockquote-footer",children:Object(y.jsx)("cite",{title:"Source Title",children:"Hanry Xu"})})]}),Object(y.jsxs)("div",{class:"btn-group",role:"group",children:[Object(y.jsx)("button",{type:"button",class:"btn btn-outline-primary",onClick:function(){e.push("/login"),e.go()},children:"Log In"}),Object(y.jsx)("button",{type:"button",class:"btn btn-outline-primary",onClick:function(){e.push("/register"),e.go()},children:"Sign Up"})]})]})]})})},W=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,s,c,r,o,i,l,d,u,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new TextEncoder,s=a.encode(n),c=a.encode(t),e.next=5,crypto.subtle.importKey("raw",s,"PBKDF2",!1,["deriveKey"]);case 5:return r=e.sent,e.next=8,crypto.subtle.deriveKey({name:"PBKDF2",hash:"SHA-256",salt:c,iterations:1e5},r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 8:return o=e.sent,e.next=11,crypto.subtle.exportKey("raw",o);case 11:return i=e.sent,e.next=14,crypto.subtle.importKey("raw",i,{name:"HKDF"},!1,["deriveBits"]);case 14:return l=e.sent,e.next=17,crypto.subtle.importKey("raw",i,{name:"PBKDF2"},!1,["deriveBits"]);case 17:return d=e.sent,u=crypto.subtle.deriveBits({name:"HKDF",hash:"SHA-256",salt:c,info:a.encode("stretch")},l,256,!1).then((function(e){return Object(E.b)(e)})),b=crypto.subtle.deriveBits({name:"PBKDF2",salt:s,iterations:1,hash:{name:"SHA-256"}},d,256).then((function(e){return Object(E.b)(e)})),e.abrupt("return",Promise.all([u,b]));case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var q=function(){var e=Object(o.useState)(""),t=Object(x.a)(e,2),n=t[0],a=t[1],s=Object(o.useState)(""),c=Object(x.a)(s,2),r=c[0],i=c[1],d=Object(l.f)(),u=Object(o.useState)(!1),b=Object(x.a)(u,2),j=b[0],m=b[1];function O(e){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(h.a.mark((function e(t){var a,s,c,o,l,d,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,W(n,r);case 3:return a=e.sent,s=a[0],c=a[1],e.next=8,f({method:"post",url:"/login",data:{Email:n,mph:c}});case 8:o=e.sent,l=o.data,d=Boolean(l.Status),u=l.cookie,localStorage.setItem("cookie",u),localStorage.setItem("stretchedMasterKey",s),localStorage.setItem("email",n),d?(window.location.href="/home",m(!1)):(i(""),m(!1),alert("Please check your username and password"));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(y.jsx)("div",{class:"container-fluid vh-100",children:Object(y.jsxs)("div",{class:"row justify-content-center align-items-center h-100",children:[Object(y.jsx)("div",{class:"col-3",children:Object(y.jsx)("img",{src:g,alt:"logo",class:"img-fluid d-flex"})}),Object(y.jsxs)("div",{class:"col-3 mx-3",children:[Object(y.jsx)("h1",{children:"Log In"}),Object(y.jsx)("div",{class:"row mt-3",children:Object(y.jsxs)("form",{onKeyPress:function(e){"Enter"===e.key&&O(e)},onSubmit:function(e){e.preventDefault()},children:[Object(y.jsxs)("div",{class:"mb-3",children:[Object(y.jsx)("label",{for:"exampleInputEmail1",class:"form-label",children:"Email"}),Object(y.jsx)("input",{type:"email",onChange:function(e){return a(e.target.value)},class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]}),Object(y.jsxs)("div",{class:"mb-3",children:[Object(y.jsx)("label",{for:"exampleInputPassword1",class:"form-label",children:"Password"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{type:j?"text":"password",onChange:function(e){return i(e.target.value)},class:"form-control",id:"exampleInputPassword1",value:r}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(e){m(!j)},children:j?"hide":"show"})]})]}),Object(y.jsx)("div",{class:"btn-group",role:"group","aria-label":"Basic outlined example",children:Object(y.jsx)("button",{type:"botton",class:"btn btn-outline-primary",onClick:O,children:"Log In"})})]})}),Object(y.jsx)("button",{type:"button",class:"btn btn-outline-primary",onClick:function(){d.push("/register"),d.go(),m(!1)},children:"Not Registered? Sign Up"}),Object(y.jsx)("button",{type:"button",class:"btn btn-outline-primary",onClick:function(){d.push("/"),d.go()},children:"About"})]})]})})};var z=function(){var e=Object(l.f)(),t=Object(o.useState)(""),n=Object(x.a)(t,2),a=n[0],s=n[1],c=Object(o.useState)(""),r=Object(x.a)(c,2),i=r[0],d=r[1],u=Object(o.useState)(!1),b=Object(x.a)(u,2),j=b[0],m=b[1];function O(e){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(h.a.mark((function t(n){var s,c,r,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==a&&""!==i){t.next=6;break}return d(""),m(!1),alert("Please enter your email and password"),t.abrupt("return");case 6:return t.next=8,W(a,i);case 8:return s=t.sent,s[0],c=s[1],t.next=13,f({method:"post",url:"/register",data:{Email:a,mph:c}});case 13:r=t.sent,o=r.data,Boolean(o.Status)?(e.push("/login"),m(!1)):(d(""),m(!1),alert("User already exist."));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(y.jsx)("div",{class:"container-fluid vh-100",children:Object(y.jsx)("div",{class:"row justify-content-center h-100 align-items-center",children:Object(y.jsxs)("div",{class:"col-4",children:[Object(y.jsx)("div",{class:"row justify-content-center",children:Object(y.jsx)("img",{src:g,class:"h-25 w-25"})}),Object(y.jsxs)("form",{onKeyPress:function(e){"Enter"===e.key&&O(e)},onSubmit:function(e){e.preventDefault()},children:[Object(y.jsxs)("div",{class:"mb-3",children:[Object(y.jsx)("label",{for:"exampleInputEmail1",class:"form-label",children:"Email"}),Object(y.jsx)("input",{type:"email",onChange:function(e){return s(e.target.value)},class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),Object(y.jsx)("div",{id:"emailHelp",class:"form-text",children:"We won't share the information with anyone."})]}),Object(y.jsxs)("div",{class:"mb-3",children:[Object(y.jsx)("label",{class:"form-label",children:"Password"}),Object(y.jsxs)("div",{class:"input-group mb-3",children:[Object(y.jsx)("input",{type:j?"text":"password",onChange:function(e){return d(e.target.value)},class:"form-control",id:"exampleInputPassword1",value:i}),Object(y.jsx)("button",{class:"btn btn-outline-primary",onClick:function(e){m(!j)},children:j?"hide":"show"})]})]}),Object(y.jsxs)("div",{class:"justify-content-between d-flex",children:[Object(y.jsxs)("div",{class:"btn-group",role:"group",children:[Object(y.jsx)("button",{type:"button",class:"btn btn-outline-primary",onClick:function(){e.push("/login"),e.go()},children:"Registered? Log In"}),Object(y.jsx)("button",{type:"button",class:"btn btn-outline-primary",onClick:function(){e.push("/"),e.go(),m(!1)},children:"About"})]}),Object(y.jsx)("button",{type:"botton",class:"btn btn-outline-primary",onClick:O,children:"Sign Up"})]})]})]})})})},Q=n(102),J=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={password:Object(y.jsx)("span",{class:"text-success",children:" Click here to generate and copy."})},s.handleCopy=s.handleCopy.bind(Object(v.a)(s)),s}return Object(s.a)(n,[{key:"handleCopy",value:function(){navigator.clipboard.writeText(this.state.password)}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{class:"card",children:Object(y.jsxs)("div",{class:"card-boy",children:[Object(y.jsxs)("div",{class:"card-header",children:[Object(y.jsxs)("h6",{children:["Generate a common 8-digit, mathematically proven safe password with just one click."," "]}),"Start by clicking the area below."]}),Object(y.jsx)("button",{type:"button card",class:"list-group-item list-group-item-action",onClick:function(){return e.setState({password:Q.generate({length:8,numbers:!0,symbols:!0,strict:!0})},e.handleCopy)},children:Object(y.jsx)("div",{class:"card-body",children:Object(y.jsx)("h6",{class:"card-subtitle mb-2 text-muted",children:this.state.password})})})]})})}}]),n}(o.Component),Y=n(24),V=n(102),X=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={p_length:10,p_numbers:!1,p_symbols:!1,p_uppercase:!1,p_strict:!1,password:Object(y.jsx)("span",{class:"text-success inline",children:"Click here to generate and copy."})},s.handleInputChange=s.handleInputChange.bind(Object(v.a)(s)),s.handleCopy=s.handleCopy.bind(Object(v.a)(s)),s}return Object(s.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(Y.a)({},a,n))}},{key:"handleCopy",value:function(){navigator.clipboard.writeText(this.state.password)}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{class:"card",children:[Object(y.jsxs)("div",{class:"card-header",children:[Object(y.jsx)("h6",{children:"Customize password generation."}),"Please specify password length and other requirements, then click the area below to start and copy generated password."]}),Object(y.jsxs)("div",{class:"row",children:[Object(y.jsx)("div",{class:"col-3 mt-2 ms-3 align-items-center",children:Object(y.jsxs)("p",{class:"d-flex",children:[" Password length: ",this.state.p_length," digits"]})}),Object(y.jsx)("div",{class:"col-3 d-flex align-items-center",children:Object(y.jsx)("input",{type:"range",class:"form-range",min:"4",max:"18",id:"p_length",value:this.state.p_length,onChange:this.handleInputChange,name:"p_length"})})]}),Object(y.jsxs)("form",{class:"mx-3 mb-2",children:[Object(y.jsxs)("div",{class:"form-check form-check-inline",children:[Object(y.jsx)("input",{class:"form-check-input",type:"checkbox",id:"uppercase",checked:this.state.password.uppercase,onChange:this.handleInputChange,name:"p_uppercase"}),Object(y.jsx)("label",{class:"form-check-label",for:"uppercase",children:"With uppercase letters"})]}),Object(y.jsxs)("div",{class:"form-check form-check-inline",children:[Object(y.jsx)("input",{class:"form-check-input",type:"checkbox",id:"number",checked:this.state.password.numbers,onChange:this.handleInputChange,name:"p_numbers"}),Object(y.jsx)("label",{class:"form-check-label",for:"number",children:"With Numbers"})]}),Object(y.jsxs)("div",{class:"form-check form-check-inline",children:[Object(y.jsx)("input",{class:"form-check-input",type:"checkbox",id:"symbol",checked:this.state.password.symbols,onChange:this.handleInputChange,name:"p_symbols"}),Object(y.jsx)("label",{class:"form-check-label",for:"symbol",children:"With Symbol"})]}),Object(y.jsxs)("div",{class:"form-check form-check-inline",children:[Object(y.jsx)("input",{class:"form-check-input",type:"checkbox",id:"strict",checked:this.state.password.strict,onChange:this.handleInputChange,name:"p_strict"}),Object(y.jsx)("label",{class:"form-check-label",for:"strict",children:"Use strict method"})]})]}),Object(y.jsx)("button",{type:"button card",class:"list-group-item list-group-item-action",onClick:function(){return e.setState({password:V.generate({length:e.state.p_length,numbers:e.state.p_numbers,symbols:e.state.p_symbols,strict:e.state.p_strict,uppercase:e.state.p_uppercase})},e.handleCopy)},children:this.state.password})]})}}]),n}(o.Component),Z=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).state={window:"QuickGeneration"},s}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t="QuickGeneration"===this.state.window?Object(y.jsx)(J,{}):Object(y.jsx)(X,{});return Object(y.jsxs)("div",{class:"container-fluid",children:[Object(y.jsx)("div",{class:"row",children:Object(y.jsx)(k,{page:"GeneratorPage"})}),Object(y.jsxs)("div",{class:"row mt-3",children:[Object(y.jsx)("div",{class:"col-3",children:Object(y.jsxs)("div",{class:"list-group",children:[Object(y.jsx)("button",{type:"button",class:"list-group-item list-group-item-action",onClick:function(){return e.setState({window:"QuickGeneration"})},children:"Quick Generation"}),Object(y.jsx)("button",{type:"button",class:"list-group-item list-group-item-action",onClick:function(){return e.setState({window:"CustomizeGeneration"})},children:"Customize"})]})}),Object(y.jsx)("div",{class:"col-9",children:t})]})]})}}]),n}(o.Component),$=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{class:"container-fluid vh-100",children:Object(y.jsx)("div",{class:"row h-100 align-items-center justify-content-center text-center",children:Object(y.jsxs)("div",{class:"col-4",children:[Object(y.jsx)("img",{src:g,class:"img-fluid d-flex"}),Object(y.jsx)("h2",{children:"Page not found"})]})})})}}]),n}(o.Component),ee=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(y.jsx)(i.a,{children:Object(y.jsxs)(l.c,{children:[Object(y.jsx)(l.a,{path:"/",exact:!0,component:L}),Object(y.jsx)(l.a,{path:"/login",component:q}),Object(y.jsx)(l.a,{path:"/register",component:z}),Object(y.jsx)(l.a,{path:"/home",component:R}),Object(y.jsx)(l.a,{path:"/generator",component:Z}),Object(y.jsx)(l.a,{path:"/checker",component:N}),Object(y.jsx)(l.a,{path:"*",component:$})]})})}}]),n}(o.Component);u.a.render(Object(y.jsx)(ee,{}),document.getElementById("root"))}},[[327,1,2]]]);
//# sourceMappingURL=main.a17ad3b9.chunk.js.map